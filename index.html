<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Investir.app - Mobile</title>
    <style>
        :root {
            --primary: #1a73e8;
            --success: #34a853;
            --danger: #d93025;
            --bg: #f8f9fa;
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            background-color: var(--bg); 
            margin: 0; 
            padding: 10px; 
            -webkit-tap-highlight-color: transparent;
        }

        .container { 
            max-width: 100%; 
            background: white; 
            padding: 15px; 
            border-radius: 15px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        h2 { font-size: 1.4rem; color: var(--primary); margin-bottom: 15px; text-align: center; }

        .secao { 
            background: #fff; 
            padding: 12px; 
            border-radius: 10px; 
            margin-bottom: 12px; 
            border: 1px solid #eee;
        }

        label { font-size: 0.85rem; font-weight: bold; color: #555; display: block; margin-bottom: 8px; }

        input { 
            width: 100%; 
            padding: 12px; 
            border: 2px solid #eee; 
            border-radius: 8px; 
            font-size: 1rem; 
            box-sizing: border-box; 
            margin-bottom: 10px;
            transition: border-color 0.3s;
        }

        input:focus { border-color: var(--primary); outline: none; }

        /* Botões Mobile-First */
        .btn { 
            width: 100%; 
            padding: 15px; 
            border: none; 
            border-radius: 8px; 
            font-weight: bold; 
            font-size: 1rem; 
            cursor: pointer;
            display: block;
            margin-bottom: 8px;
        }

        .btn-primary { background: var(--primary); color: white; }
        .btn-success { background: var(--success); color: white; }

        /* Dashboard Responsivo */
        .dashboard { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 8px; 
            margin-bottom: 15px; 
        }

        .card { 
            background: #fff; 
            border: 1px solid #ddd; 
            padding: 8px; 
            text-align: center; 
            border-radius: 8px;
            font-size: 0.8rem;
        }

        .card span { display: block; font-size: 1.2rem; font-weight: bold; color: var(--primary); }
        .premiado { background-color: #fff9c4 !important; border-color: #fbc02d !important; }

        /* Lista de Jogos Otimizada */
        .jogo-item { 
            padding: 12px 5px; 
            border-bottom: 1px solid #eee; 
            display: flex; 
            flex-direction: column;
            gap: 8px;
        }

        .row-jogo { display: flex; justify-content: space-between; align-items: center; width: 100%; }

        .dezenas-grid { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 4px; 
            justify-content: flex-start;
        }

        .dezena { 
            width: 28px; 
            height: 28px; 
            line-height: 28px; 
            text-align: center; 
            border: 1px solid #ddd; 
            border-radius: 50%; 
            font-size: 0.85rem; 
            font-family: monospace;
        }

        .fixa { border-color: var(--danger); color: var(--danger); font-weight: bold; }
        .acerto { background: var(--success) !important; color: white !important; border-color: var(--success) !important; }

        #listaJogos { 
            margin-top: 10px; 
            max-height: 50vh; 
            overflow-y: auto; 
            border-top: 2px solid #eee; 
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Investir.app</h2>
    
    <div class="secao">
        <label>4 FIXAS:</label>
        <input type="tel" id="inputFixas" value="01 03 05 06" placeholder="Ex: 01 05 10 15">
        <button class="btn btn-primary" onclick="processarGeracao()">GERAR JOGOS</button>
    </div>

    <div id="dashboardArea" class="dashboard" style="display:none;">
        <div class="card" id="card11"><label>11 pts</label><span id="count11">0</span></div>
        <div class="card" id="card12"><label>12 pts</label><span id="count12">0</span></div>
        <div class="card" id="card13"><label>13 pts</label><span id="count13">0</span></div>
        <div class="card" id="card14"><label>14 pts</label><span id="count14">0</span></div>
        <div class="card" id="card15"><label>15 pts</label><span id="count15">0</span></div>
    </div>

    <div class="secao" style="background: #eefbee;">
        <label>CONFERIR (15 dezenas):</label>
        <input type="tel" id="inputSorteio" placeholder="Cole o resultado aqui">
        <button class="btn btn-success" onclick="simularSorteio()">CONFERIR ACERTOS</button>
    </div>

    <div id="listaJogos"></div>
</div>

<script>
    let jogosCriados = [];
    let fixasAtuais = [];
    let gruposDinamicos = [];

    function processarGeracao() {
        const str = document.getElementById('inputFixas').value;
        fixasAtuais = [...new Set(str.split(/[\s,]+/).map(Number).filter(n => n > 0 && n <= 25))];
        
        if (fixasAtuais.length !== 4) {
            alert("Escolha 4 dezenas fixas.");
            return;
        }
        document.getElementById('dashboardArea').style.display = 'none';
        montarGrupos();
        gerar();
    }

    function montarGrupos() {
        const disponiveis = Array.from({length: 25}, (_, i) => i + 1).filter(n => !fixasAtuais.includes(n));
        gruposDinamicos = [];
        for (let i = 0; i < 7; i++) gruposDinamicos.push(disponiveis.slice(i * 3, i * 3 + 3));
    }

    function gerar() {
        jogosCriados = [];
        for (let a=0; a<7; a++) {
            for (let b=a+1; b<7; b++) {
                for (let c=b+1; c<7; c++) {
                    for (let d=c+1; d<7; d++) {
                        for (let e=d+1; e<7; e++) {
                            let jogo = [...fixasAtuais];
                            [a,b,c,d,e].forEach(idx => jogo.push(gruposDinamicos[idx][0], gruposDinamicos[idx][1]));
                            let extra = [0,1,2,3,4,5,6].find(i => ![a,b,c,d,e].includes(i));
                            jogo.push(gruposDinamicos[extra][0]);
                            jogosCriados.push(jogo.sort((x,y) => x-y));
                        }
                    }
                }
            }
        }
        renderizar();
    }

    function renderizar(sorteio = null) {
        const lista = document.getElementById('listaJogos');
        lista.innerHTML = '';
        let contagem = { 11: 0, 12: 0, 13: 0, 14: 0, 15: 0 };

        jogosCriados.forEach((jogo, idx) => {
            let acertos = 0;
            const item = document.createElement('div');
            item.className = 'jogo-item';
            
            let dezenasHtml = '<div class="dezenas-grid">';
            jogo.forEach(n => {
                let fixa = fixasAtuais.includes(n);
                let acerto = sorteio && sorteio.includes(n);
                if (acerto) acertos++;
                dezenasHtml += `<span class="dezena ${fixa?'fixa':''} ${acerto?'acerto':'' }">${n.toString().padStart(2,'0')}</span>`;
            });
            dezenasHtml += '</div>';

            if (sorteio && acertos >= 11) {
                contagem[acertos]++;
                item.classList.add('premiado');
            }

            item.innerHTML = `
                <div class="row-jogo">
                    <strong>#${idx+1}</strong>
                    <span>${sorteio ? '<b>' + acertos + ' pts</b>' : ''}</span>
                </div>
                ${dezenasHtml}
            `;
            lista.appendChild(item);
        });

        if (sorteio) {
            document.getElementById('dashboardArea').style.display = 'grid';
            [11,12,13,14,15].forEach(v => {
                document.getElementById('count'+v).innerText = contagem[v];
                document.getElementById('card'+v).className = 'card ' + (contagem[v]>0?'premiado':'');
            });
        }
    }

    function simularSorteio() {
        const str = document.getElementById('inputSorteio').value;
        const sorteio = str.split(/[\s,]+/).map(Number).filter(n => n > 0);
        if (sorteio.length !== 15) return alert("Insira 15 números.");
        renderizar(sorteio);
        window.scrollTo(0, document.getElementById('dashboardArea').offsetTop);
    }

    processarGeracao();
</script>
</body>
</html>